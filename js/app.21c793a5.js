(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},i={app:0},a=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var n=s("85ec"),i=s.n(n);i.a},"0f5d":function(e,t,s){"use strict";var n=s("a9b8"),i=s.n(n);i.a},"2d7d":function(e,t,s){"use strict";var n=s("cf3b"),i=s.n(n);i.a},4240:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},a=[],r={name:"App"},o=r,c=(s("034f"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null),u=l.exports,p=s("8c4f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.initial?s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.elpartido,expression:"elpartido"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.elpartido},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnterPress(t)},input:function(t){t.target.composing||(e.elpartido=t.target.value)}}})]):s("div",{staticClass:"panel"},[s("players",{attrs:{loading:e.loading,playerList:e.playerList},on:{playerSelect:e.onPlayerSelect}}),s("button",{attrs:{disabled:e.loading},on:{click:e.onClickCurrentSessionInfo}},[e._v("Current Session Info")]),s("button",{attrs:{disabled:e.loading},on:{click:e.onClickResetSession}},[e._v("New Random Session")]),s("div",{staticClass:"create-session"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMaster0,expression:"selectedMaster0"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedMaster0=t.target.multiple?s:s[0]}}},e._l(e.playerList.filter((function(e){return e.active})),(function(t){return s("option",{key:t.name},[e._v(e._s(t.name))])})),0),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMaster1,expression:"selectedMaster1"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedMaster1=t.target.multiple?s:s[0]}}},e._l(e.playerList.filter((function(e){return e.active})),(function(t){return s("option",{key:t.name},[e._v(e._s(t.name))])})),0),s("button",{attrs:{disabled:e.loading},on:{click:e.onClickCreateSessionWithSelectedMasters}},[e._v("Create New Session")])]),s("div",{staticClass:"create-session"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPlayerName,expression:"newPlayerName"}],attrs:{type:"text"},domProps:{value:e.newPlayerName},on:{input:function(t){t.target.composing||(e.newPlayerName=t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPlayerSkill,expression:"newPlayerSkill"}],attrs:{type:"number",min:"1",max:"10"},domProps:{value:e.newPlayerSkill},on:{input:function(t){t.target.composing||(e.newPlayerSkill=t.target.value)}}}),s("button",{attrs:{disabled:e.loading},on:{click:e.onClickAddNewPlayer}},[e._v("Add New Player")])])],1),s("div",{staticClass:"activity-trace"},e._l(e.activities,(function(t,n){return s("span",{key:n,domProps:{innerHTML:e._s(t)}})})),0)])},y=[],f=(s("99af"),s("4de4"),s("b0c0"),s("498a"),s("fb6a"),s("ac1f"),s("5319"),{data:function(){return{ws:null,isWsOpen:!1}},methods:{capitalizeFirstLetter:function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},connect:function(){var e=location.origin.replace(/^http/,"ws"),t=new WebSocket(e);t.onopen=this.onWsOpen,t.onerror=this.onWsError,t.onmessage=this.onWsMessage,this.ws=t},onWsOpen:function(){this.isWsOpen=!0},onWsError:function(e){console.error("error on ws: ",e)},onWsMessage:function(e){try{var t=JSON.parse(e.data);console.log({response:t});var s="onWsResponse".concat(this.capitalizeFirstLetter(t.messageId));console.log({handlerName:s}),"function"===typeof this[s]&&this[s].call(this,t.data)}catch(n){console.error("Couldnt parse message.data")}}}}),M={name:"HelloWorld",mixins:[f],data:function(){return{elpartido:"",initial:!0,loading:!1,ws:null,activities:[],playerList:[],selectedMaster0:null,selectedMaster1:null,newPlayerName:"",newPlayerSkill:1}},methods:{onEnterPress:function(){"fwyd"===this.elpartido&&(this.initial=!1)},onPlayerSelect:function(e){this.ws&&this.ws.readyState===WebSocket.OPEN?(this.loading=!0,this.ws.send("playerActiveState;"+JSON.stringify(e))):this.activities.unshift("Ws error: not ready")},onClickResetSession:function(){this.ws&&this.ws.readyState===WebSocket.OPEN?(this.loading=!0,this.ws.send("createSession"),this.activities.unshift("Creating a new session")):this.activities.unshift("Ws error: not ready")},onClickCreateSessionWithSelectedMasters:function(){this.ws&&this.ws.readyState===WebSocket.OPEN?(console.log({m1:this.selectedMaster0,m2:this.selectedMaster1}),this.selectedMaster0&&this.selectedMaster1&&this.ws.send("createSession;"+JSON.stringify({master0:this.selectedMaster0,master1:this.selectedMaster1}))):this.activities.unshift("Ws error: not ready")},onClickAddNewPlayer:function(){this.ws&&this.ws.readyState===WebSocket.OPEN?""!==this.newPlayerName.trim()&&this.ws.send("createPlayer;"+JSON.stringify({name:this.newPlayerName,skill:this.newPlayerSkill})):this.activities.unshift("Ws error: not ready")},onClickCurrentSessionInfo:function(){this.ws&&this.ws.readyState===WebSocket.OPEN?(this.loading=!0,this.ws.send("sessionInfo"),this.activities.unshift("Fetching current session info")):this.activities.unshift("Ws error: not ready")},onWsOpen:function(e){console.log("ws  is open now",e),this.ws=e.target,this.ws.send("playerList")},createSessionLink:function(e,t){var s="/#/pick/".concat(e);return t?"".concat(s,"/").concat(t):s},showSessionInfo:function(e){var t=this.createSessionLink(e.id,e.masters[0].id),s=this.createSessionLink(e.id,e.masters[1].id),n=this.createSessionLink(e.id);this.activities.unshift("<strong>".concat(e.masters[0].player.name,'</strong> is picking for Team 1. Url: <a href="').concat(t,'" target="_blank">').concat(t,"</a>")),this.activities.unshift("<strong>".concat(e.masters[1].player.name,'</strong> is picking for Team 2. Url: <a href="').concat(s,'" target="_blank">').concat(s,"</a>")),this.activities.unshift('Spectator url: <a href="'.concat(n,'" target="_blank">').concat(n,"</a>"))},onWsResponseCreateSession:function(e){this.loading=!1,this.activities.unshift("Created a new session with id ".concat(e.id)),console.log("onWsResponseCreateSession"),console.log({session:e}),this.showSessionInfo(e),this.activities.unshift("---")},onWsResponseSessionInfo:function(e){this.loading=!1,console.log({session:e}),this.showSessionInfo(e),this.activities.unshift("---")},onWsResponsePlayerList:function(e){this.playerList=e,console.log({playerList:e});var t=e.filter((function(e){return e.active}));this.selectedMaster0=t[0]||null,this.selectedMaster1=t[1]||null},onWsResponsePlayerActiveState:function(e){console.log(e),this.loading=!1}},mounted:function(){this.connect()},watch:{loading:function(){}}},m=M,h=(s("0f5d"),Object(c["a"])(m,d,y,!1,null,"3fa53d45",null)),v=h.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.sessionAvailable?e._e():s("show-error",{attrs:{message:"Error: Session is no longer available"}}),e.isMaster&&e.canSpectate?s("master-picks",{attrs:{masterIds:e.masterIds,poolPlayers:e.pickPool,myPicks:e.myPicks,isMyTurn:e.isMyTurn,opponentPicks:e.opponentPicks},on:{picked:e.onPicked}}):e.canSpectate?s("spectator"):s("show-error",{attrs:{message:"Error: Session information is incorrect"}})],1)},g=[],N=(s("7db0"),{name:"Pick",mixins:[f],data:function(){return{ws:null,isMaster:!1,canSpectate:!1,sessionAvailable:!0,masterInfo:{},opponentMasterInfo:{},pickPool:[],myPicks:[],isMyTurn:!1,opponentPicks:[]}},computed:{masterIds:function(){return this.masterInfo.id&&this.opponentMasterInfo.id?[this.masterInfo.id,this.opponentMasterInfo.id]:[]}},methods:{onPicked:function(e){if(this.ws&&this.ws.readyState===WebSocket.OPEN){var t=this.$route.params,s=t.master,n=t.session;this.ws.send("picked;"+JSON.stringify({master:s,session:n,pickedPlayer:e}))}else this.activities.unshift("Ws error: not ready")},onWsOpen:function(e){var t=this.$route.params,s=t.master,n=t.session;console.log({spectatorId:n}),this.ws=e.target,this.ws.send("masterConnected;"+JSON.stringify(s)),this.ws.send("spectatorConnected;"+JSON.stringify(n)),this.ws.send("sessionInfoForMaster;"+JSON.stringify(s))},onWsResponseMasterConnected:function(e){console.log("onWsResponseMasterConnected",e),this.isMaster=e},onWsResponseSpectatorConnected:function(e){console.log("onWsResponseSpectatorConnected",e),this.canSpectate=e},onWsResponseCreateSession:function(e){e.newSessionCreated&&(this.isMaster=!1,this.canSpectate=!1,this.sessionAvailable=!1)},onWsResponseSessionInfoForMaster:function(e){console.log("sessionInfoForMaster",e);var t=this.$route.params.master;this.masterInfo=e.masters.find((function(e){return e.id===t})),this.opponentMasterInfo=e.masters.find((function(e){return e.id!==t}))},onWsResponseSessionInfoUpdate:function(e){console.log("onWsResponseSessionInfoUpdate"),console.log(JSON.stringify(this.masterInfo,null,2)),console.log(JSON.stringify(e.turn,null,2)),console.log(JSON.stringify(e.picks,null,2)),this.masterInfo&&(this.myPicks=e.picks[this.masterInfo.player.name],this.opponentPicks=e.picks[this.opponentMasterInfo.player.name],this.pickPool=e.pickPool,this.isMyTurn=e.turn.name===this.masterInfo.player.name)},onWsResponsePicked:function(e){console.log({picked:JSON.stringify(e)})}},created:function(){this.connect()}}),k=N,j=Object(c["a"])(k,w,g,!1,null,"69755a3e",null),S=j.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h4",[e._v("Select Active Players")]),s("div",{staticClass:"player-list"},e._l(e.players,(function(t){return s("div",{key:t.name,staticClass:"player-list__item"},[s("span",[s("input",{attrs:{type:"checkbox",disabled:e.loading},domProps:{checked:t.active},on:{change:function(s){return e.onChange(s,t)}}})]),s("span",[e._v(e._s(t.name)+" ")]),s("span",[e._v("("+e._s(t.skill)+")")])])})),0)])},I=[],C=s("2909"),P={name:"Players",props:{loading:{type:Boolean,default:!1},playerList:{type:Array,default:function(){return[]}}},computed:{players:function(){return this.playerList?Object(C["a"])(this.playerList).sort((function(e,t){return e.name.charAt(0)>t.name.charAt(0)?1:-1})):[]}},methods:{onChange:function(e,t){this.$emit("playerSelect",{active:e.target.checked,player:t})}}},b=P,x=(s("a408"),Object(c["a"])(b,L,I,!1,null,"73aa1287",null)),O=x.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"error"},[e._v(e._s(e.message))])},z=[],_={name:"ShowError",props:{message:String}},E=_,W=(s("d614"),Object(c["a"])(E,T,z,!1,null,null,null)),D=W.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"base"},[s("div",{staticClass:"column"},[s("h3",{staticClass:"my-team"},[e._v("My Picks")]),s("div",{staticClass:"picks-box",class:{"is-turn":e.isMyTurn}},[s("transition-group",{attrs:{name:"list",tag:"div"}},e._l(e.myPicks,(function(t){return s("player-overview",{key:t.name,attrs:{isMaster:e.masterIds.includes(t.name),player:t}})})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isMyTurn,expression:"isMyTurn"}],staticClass:"turn-notifier blink"},[e._v("It's your turn now!")])]),s("div",{staticClass:"column"},[s("h1",{staticClass:"players"},[e._v("Players")]),s("div",{staticClass:"players-box"},e._l(e.poolPlayers,(function(t){return s("player-overview",{key:t.name,attrs:{player:t,skillRange:t.skillRange},on:{picked:function(t){return e.$emit("picked",t)}}})})),1)]),s("div",{staticClass:"column"},[s("h3",{staticClass:"players"},[e._v("Opponent Picks")]),s("div",{staticClass:"picks-box",class:{"is-turn":!e.isMyTurn}},[s("transition-group",{attrs:{name:"list",tag:"div"}},e._l(e.opponentPicks,(function(t){return s("player-overview",{key:t.name,attrs:{isMaster:e.masterIds.includes(t.name),player:t}})})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMyTurn,expression:"!isMyTurn"}],staticClass:"turn-notifier"},[e._v("Wait your opponent to pick...")])])])},Y=[],R={name:"MasterPicks",props:{masterIds:{type:Array,default:function(){return[]}},myPicks:{type:Array,default:function(){return[]}},opponentPicks:{type:Array,default:function(){return[]}},poolPlayers:{type:Array,default:function(){return[]}},isMyTurn:Boolean}},G=R,Z=(s("9f51"),Object(c["a"])(G,A,Y,!1,null,null,null)),Q=Z.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("Spectator visible content")])},U=[],B={name:"Spectator"},K=B,$=Object(c["a"])(K,J,U,!1,null,null,null),F=$.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.classes,on:{click:e.onClick}},[e.isMaster?s("span",{staticClass:"master"},[s("img",{attrs:{src:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMS45MjUgNTExLjkyNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTExLjkyNSA1MTEuOTI1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij4KPHBhdGggc3R5bGU9ImZpbGw6I0ZGQzEwNzsiIGQ9Ik00NjkuMzMzLDEyNy45NjJjLTIzLjU2NCwwLTQyLjY2NywxOS4xMDMtNDIuNjY3LDQyLjY2N2MwLjAwOSw0LjQ3MywwLjcyOSw4LjkxNiwyLjEzMywxMy4xNjMgIGwtMzQuNjAzLDIxLjk5NWMtMjIuNzgzLDE0LjUxNi01Mi44MjEsOS43MDUtNjkuOTMxLTExLjJsLTMzLjkyLTQxLjQ5M2M1LjM5OC03LjI2Nyw4LjMxNi0xNi4wNzgsOC4zMi0yNS4xMzEgIGMwLTIzLjU2NC0xOS4xMDMtNDIuNjY3LTQyLjY2Ny00Mi42NjdzLTQyLjY2NywxOS4xMDMtNDIuNjY3LDQyLjY2N2MwLjAwNCw5LjA1MywyLjkyMiwxNy44NjQsOC4zMiwyNS4xMzFsLTMzLjkyLDQxLjQ5MyAgYy0xNy4xMDcsMjAuODkzLTQ3LjEzMSwyNS43MDMtNjkuOTA5LDExLjJMODMuMiwxODMuNzkyYzEuNDA1LTQuMjQ3LDIuMTI1LTguNjksMi4xMzMtMTMuMTYzICBjMC4wMDQtMjMuNTY0LTE5LjA5NS00Mi42Ny00Mi42Ni00Mi42NzRDMTkuMTEsMTI3Ljk1MSwwLjAwNCwxNDcuMDUxLDAsMTcwLjYxNWMtMC4wMDQsMjIuMTIsMTYuODk4LDQwLjU3NSwzOC45MzMsNDIuNTEgIGwyNS4yMTYsMTUxLjI1M2MwLjg1NSw1LjE0Myw1LjMwMyw4LjkxNSwxMC41MTcsOC45MTdoMzYyLjY2N2M1LjIxNC0wLjAwMiw5LjY2Mi0zLjc3NCwxMC41MTctOC45MTdsMjUuMjE2LTE1MS4yNTMgIGMyMy40Ny0yLjEwNSw0MC43OS0yMi44MzgsMzguNjg1LTQ2LjMwOEM1MDkuNzgxLDE0NC44NDgsNDkxLjM5LDEyOC4wMDMsNDY5LjMzMywxMjcuOTYyeiIvPgo8ZWxsaXBzZSBzdHlsZT0iZmlsbDojRkZBMDAwOyIgY3g9IjI1NiIgY3k9IjM2Mi42MjkiIHJ4PSIxODEuMzMzIiByeT0iNTMuMzMzIi8+CjxwYXRoIHN0eWxlPSJmaWxsOiNGRkQ1NEY7IiBkPSJNMjU2LDQyNi42MjljLTk1LjQyNCwwLTE5Mi0yMS45NzMtMTkyLTY0czk2LjU3Ni02NCwxOTItNjRzMTkyLDIxLjk3MywxOTIsNjQgIFMzNTEuNDI0LDQyNi42MjksMjU2LDQyNi42Mjl6IE0yNTYsMzE5Ljk2MmMtMTEyLjA0MywwLTE3MC42NjcsMjcuNzMzLTE3MC42NjcsNDIuNjY3UzE0My45NTcsNDA1LjI5NiwyNTYsNDA1LjI5NiAgczE3MC42NjctMjcuNzMzLDE3MC42NjctNDIuNjY3UzM2OC4wNDMsMzE5Ljk2MiwyNTYsMzE5Ljk2MnoiLz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg=="}})]):e._e(),e._v(" "+e._s(e.player.name)+" ")])},V=[],X=(s("a9e3"),s("ade3")),q={name:"PlayerOverview",props:{player:{type:Object,default:function(){return{name:"Unknown",skill:0,pickable:!1}}},skillRange:{type:Number,default:0},isMaster:Boolean},methods:{onClick:function(){this.player.pickable&&this.$emit("picked",this.player)}},computed:{classes:function(){return Object(X["a"])({pickable:this.player.pickable,player:!0},"player skill-range-".concat(this.skillRange),!0)}}},ee=q,te=(s("2d7d"),Object(c["a"])(ee,H,V,!1,null,"c20f56f6",null)),se=te.exports;n["a"].config.productionTip=!1,n["a"].use(p["a"]),n["a"].component("players",O),n["a"].component("show-error",D),n["a"].component("master-picks",Q),n["a"].component("spectator",F),n["a"].component("player-overview",se);var ne=new p["a"]({routes:[{path:"/",component:v},{path:"/pick/:session",component:S},{path:"/pick/:session/:master",component:S}]});new n["a"]({render:function(e){return e(u)},router:ne}).$mount("#app")},"85ec":function(e,t,s){},"9f51":function(e,t,s){"use strict";var n=s("cce1"),i=s.n(n);i.a},a408:function(e,t,s){"use strict";var n=s("4240"),i=s.n(n);i.a},a9b8:function(e,t,s){},cce1:function(e,t,s){},cf3b:function(e,t,s){},d614:function(e,t,s){"use strict";var n=s("f0b0"),i=s.n(n);i.a},f0b0:function(e,t,s){}});
//# sourceMappingURL=app.21c793a5.js.map